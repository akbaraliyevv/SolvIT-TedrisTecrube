<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>SolvIT - İstifadəçi Profili</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* CSS Stillərini əvvəlki səhifələrdən götürürük */
        body { font-family: ui-sans-serif, system-ui, sans-serif; background-color: #f3f4f6; }
        .sidebar-container { width: 16rem; height: 100vh; position: fixed; top: 0; left: 0; z-index: 40; }
        .content-area { margin-left: 16rem; min-height: 100vh; }
        @media (max-width: 767px) { 
            .sidebar-container { display: none; }
            .content-area { margin-left: 0; }
        }
        /* Yalnız göstərilən sahələr üçün stillər */
        .form-input-disabled {
            background-color: #e5e7eb; /* Gray-200 */
            cursor: not-allowed;
            color: #6b7280; /* Gray-500 */
        }
        .form-input:focus, .form-select:focus {
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.4); 
            border-color: #4f46e5; 
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="sidebar" class="sidebar-container bg-gray-800 shadow-xl">
        <div class="flex items-center justify-center h-16 border-b border-indigo-500/50">
            <span class="text-3xl font-extrabold text-white tracking-widest">SolvIT</span>
        </div>
        <nav class="p-4 space-y-1">
            
            <p class="text-xs text-gray-400 uppercase font-semibold mt-4 ml-3">Əsas Menyu</p>
            
            <a href="/dashboard" class="flex items-center p-3 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition duration-150 group">
                <svg class="w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-10v10a1 1 0 001 1h3M14 10l-4-4-4 4"></path></svg>
                Dashboard
            </a>
            
            <a href="/new_issue" class="flex items-center p-3 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition duration-150 group">
                <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                Yeni Problem Bildir
            </a>
            
            <a href="/reports" class="flex items-center p-3 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition duration-150 group">
                <svg class="w-5 h-5 mr-3 text-red-400 group-hover:text-red-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h9.75m-9.75 3h9.75m-9.75 3h9.75m-9.75 3h9.75m-9 3.5h7.5A2.25 2.25 0 0018 19.25V5.75A2.25 2.25 0 0015.75 3h-7.5A2.25 2.25 0 006 5.75v13.5A2.25 2.25 0 008.25 21z" /></svg>
                Problemlərim
            </a>

            <p class="text-xs text-gray-400 uppercase font-semibold mt-6 ml-3 pt-4 border-t border-gray-700">Hesab</p>
            
            <a href="/profile" class="flex items-center p-3 text-white rounded-lg bg-indigo-600 transition duration-150 group shadow-md">
                <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14c-4.418 0-8 2.239-8 5v2h16v-2c0-2.761-3.582-5-8-5z"></path></svg>
                Profil
            </a>
            
            <a href="/logout" class="flex items-center p-3 text-red-400 rounded-lg hover:bg-gray-700 transition duration-150 group">
                <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l3 3m0 0l-3 3m3-3H9" /></svg>
                Çıxış
            </a>
        </nav>
    </div>
    <div class="content-area">
        
        <header class="h-16 bg-white shadow flex items-center justify-between px-6 md:hidden">
            <span class="text-xl font-bold text-gray-800">SolvIT</span>
            <button id="mobile-menu-open-btn" class="text-gray-500 hover:text-gray-700">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
            </button>
        </header>


        <main class="p-4 md:p-8">
            <div class="max-w-4xl mx-auto">
                
                <h2 class="text-3xl font-extrabold text-gray-800 mb-8 pb-2 border-b">
                    <span class="inline-flex items-center space-x-2">
                         <svg class="w-7 h-7 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6.75a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.25a.75.75 0 01.75-.75h14.5a.75.75 0 01.75.75V21h-16v-.75z" /></svg>
                         <span>İstifadəçi Profili və Parametrlər</span>
                    </span>
                </h2>

                <div class="bg-white p-8 rounded-xl shadow-2xl mb-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-3">Əsas Məlumatlar</h3>
                    <div class="md:flex md:items-start md:space-x-6">
                        
                        <div class="flex flex-col items-center mb-6 md:mb-0">
                            <img id="profileImagePreview" class="h-32 w-32 rounded-full object-cover shadow-md border-4 border-indigo-200" src="https://ui-avatars.com/api/?name=AQ&background=4f46e5&color=fff&size=256&font-size=0.3" alt="Profil şəkli">
                            <label for="profilePicture" class="mt-3 cursor-pointer text-sm font-medium text-indigo-600 hover:text-indigo-800 transition duration-150">
                                Şəkli Dəyiş
                            </label>
                            <input type="file" id="profilePicture" class="hidden" accept="image/*">
                        </div>

                        <div class="flex-grow">
                            <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8">
                                
                                <div>
                                    <label for="full_name" class="block text-sm font-medium text-gray-700">Tam Ad</label>
                                    <input type="text" id="full_name" value="Aynur Quliyeva" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm form-input-disabled" disabled>
                                    <p class="text-xs text-gray-500 mt-1">Bu məlumatı dəyişmək mümkün deyil.</p>
                                </div>
                                
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700">Email Ünvanı</label>
                                    <input type="email" id="email" value="aynur.quliyeva@solvit.az" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm form-input-disabled" disabled>
                                    <p class="text-xs text-gray-500 mt-1">Bu məlumatı dəyişmək mümkün deyil.</p>
                                </div>
                                
                                <div class="sm:col-span-2">
                                    <label for="phone" class="block text-sm font-medium text-gray-700">Əlaqə Nömrəsi</label>
                                    <input type="tel" id="phone" value="+994 50 123 45 67" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm">
                                </div>
                                
                            </div>
                            
                            <form id="phoneForm" class="mt-6">
                                <button type="submit" class="w-full sm:w-auto flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150">
                                    Əlaqə Nömrəsini Yadda Saxla
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-8 rounded-xl shadow-2xl">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-3 flex items-center space-x-2">
                        <svg class="w-6 h-6 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-6 0h18a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V12.75a2.25 2.25 0 012.25-2.25z" /></svg>
                        <span>Parolun Dəyişdirilməsi</span>
                    </h3>
                    
                    <form id="passwordForm">
                        <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8">
                            
                            <div class="sm:col-span-2">
                                <label for="current_password" class="block text-sm font-medium text-gray-700">Mövcud Parol</label>
                                <input type="password" id="current_password" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm" required>
                            </div>

                            <div>
                                <label for="new_password" class="block text-sm font-medium text-gray-700">Yeni Parol</label>
                                <input type="password" id="new_password" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm" required>
                            </div>
                            
                            <div>
                                <label for="confirm_password" class="block text-sm font-medium text-gray-700">Yeni Parolu Təsdiqlə</label>
                                <input type="password" id="confirm_password" class="form-input mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm" required>
                            </div>
                            
                        </div>

                        <div class="mt-6">
                            <button type="submit" class="w-full sm:w-auto flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition duration-150">
                                Parolu Yenilə
                            </button>
                        </div>
                    </form>
                </div>
                
            </div>
        </main>
    </div>
    <div id="toast-container" class="fixed bottom-5 right-5 z-50"></div>


    <script>
        // Sidebar Toggle
        const sidebar = document.getElementById('sidebar');
        const mobileMenuOpenBtn = document.getElementById('mobile-menu-open-btn');

        mobileMenuOpenBtn.addEventListener('click', function() {
            sidebar.classList.toggle('hidden');
        });
        
        // --- TOAST VƏ BİLDİRİŞ MƏNTİQİ ---

        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toast-container');
            let bgColor = (type === 'error') ? 'bg-red-500' : 'bg-green-500';
            let iconHtml = (type === 'error') ? 
                `<svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>` : 
                `<svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;

            const toast = document.createElement('div');
            toast.className = `p-4 mb-3 text-sm text-white ${bgColor} rounded-lg shadow-xl transition-opacity duration-300 opacity-0 flex items-center`;
            toast.innerHTML = `${iconHtml} <span>${message}</span>`;
            
            toastContainer.appendChild(toast);
            
            setTimeout(() => { toast.classList.add('opacity-100'); }, 10);
            setTimeout(() => { toast.classList.remove('opacity-100'); }, 4000);
            setTimeout(() => { toast.remove(); }, 4500);
        }

        // --- PROFİL ŞƏKLİ ÖNİZLƏMƏ MƏNTİQİ ---
        document.getElementById('profilePicture').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profileImagePreview').src = e.target.result;
                };
                reader.readAsDataURL(file);
                showToast("Şəkil yüklənməyə hazırlandı.", 'success');
            }
        });

        // --- FORMA GÖNDƏRİLMƏSİ MƏNTİQİ (Simulyasiya) ---

        // 1. Əlaqə Nömrəsi Formu
        document.getElementById('phoneForm').addEventListener('submit', function(event) {
            event.preventDefault();
            // Yalnız Əlaqə Nömrəsi dəyişdirilə bilər.
            console.log("Əlaqə nömrəsi yeniləndi.");
            showToast("Əlaqə nömrəniz uğurla yeniləndi!", 'success');
        });

        // 2. Parolun Dəyişdirilməsi Formu
        document.getElementById('passwordForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const newPass = document.getElementById('new_password').value;
            const confirmPass = document.getElementById('confirm_password').value;
            
            if (newPass !== confirmPass) {
                showToast("Yeni Parol və Təsdiq Parolu eyni deyil!", 'error');
                return;
            }
            
            if (newPass.length < 6) {
                 showToast("Parol ən azı 6 simvol olmalıdır.", 'error');
                 return;
            }
            
            console.log("Parol yeniləndi.");
            showToast("Parolunuz uğurla dəyişdirildi!", 'success');
            this.reset();
        });

    </script>
</body>
</html>